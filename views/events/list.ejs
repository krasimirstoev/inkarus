<% /* views/events/list.ejs */ %>

<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Events</h2>
    <button class="btn btn-sm btn-outline-light" id="btn-new-event">
      <i class="bi bi-plus-lg"></i> Add Event
    </button>
  </div>

  <!-- Timeline container -->
  <div class="timeline-wrapper">
    <div id="timeline" data-project-id="<%= projectId %>">
      <!-- Timeline items will be inserted dynamically -->
    </div>
  </div>

  <!-- List of events below -->
  <ul class="list-group mt-4" id="events-list">
  <% events.forEach(ev => { %>
    <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-dark">
      <div>
        <div class="fw-bold text-light"><%= ev.title %></div>
        <small class="text-muted"><%= ev.event_date || 'â€“' %></small>
      </div>
      <div class="btn-group btn-group-sm">
        <button
          type="button"
          class="btn btn-link text-light btn-edit"
          data-id="<%= ev.id %>"
        >Edit</button>

      <!-- AJAX Delete button -->
        <button
          type="button"
          class="btn btn-link text-danger btn-delete"
          data-id="<%= ev.id %>"
        >Delete</button>
      </div> 
    </li>
  <% }) %>
  </ul>

<!-- Modal for create/edit -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header border-secondary">
        <h5 class="modal-title" id="eventModalLabel">Event</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="eventModalBody"></div>
    </div>
  </div>
</div>

<script src="/js/pages/event-timeline.js" defer></script>
