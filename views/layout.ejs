<!-- views/layout.ejs -->
<!-- This file serves as the main layout for the application, including header, footer, and main content. -->
<!-- It uses EJS templating to inject dynamic content such as title and body. -->
<!-- The layout also includes links to CSS stylesheets and JavaScript files for functionality and styling. -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= title %> â€” <%= __('App.name') %></title>

  <!-- CSS -->
  <link href="https://unpkg.com/vis-timeline@7.4.9/dist/vis-timeline-graph2d.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="/css/styles.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Manrope&display=swap" rel="stylesheet">

  <!-- JS (defer) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/vis-timeline@7.4.9/standalone/umd/vis-timeline-graph2d.min.js" defer></script>
  <script src="https://unpkg.com/d3@7/dist/d3.min.js" defer></script>

</head>
<body class="bg-dark text-light" style="font-family: 'Manrope', sans-serif;">
  <%- include('partials/header') %>

  <main class="container mt-4">
    <%- body %>
  </main>
  
<script>
  // Inject full translation dictionary into the frontend
  window.translations = <%- JSON.stringify(translations || {}) %>;

  // Translation helper using dot notation and optional replacements
  window.__ = function (key, params) {
    let t = window.translations;
    key.split('.').forEach(part => {
      if (t && t[part] !== undefined) {
        t = t[part];
      } else {
        t = null;
      }
    });

    if (typeof t !== 'string') return key;

    if (params) {
      for (const [k, v] of Object.entries(params)) {
        t = t.replace(new RegExp(`{{\\s*${k}\\s*}}`, 'g'), v);
      }
    }

    return t;
  };
</script>


  <%- include('partials/footer') %>
</body>

</html>
